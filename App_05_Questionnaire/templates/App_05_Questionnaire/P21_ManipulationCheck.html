{% extends "otree/Page.html" %}
{% load staticfiles %}

{# --- 共通CSS/JSの読み込み --- #}
{% block styles %}
  <link rel="stylesheet" href="{% static 'common.css' %}">
  {# 21. 事後アンケート.html からエラーメッセージ用スタイルを拝借 #}
  <style>
    #validation-error-message {
      color: #D9534F;
      font-weight: bold;
      text-align: center;
      margin-bottom: 16px;
      display: none;
    }
  </style>
{% endblock %}

{# --- ページのタイトル --- #}
{% block title %}
  タスク３：事後アンケート（操作チェック）
{% endblock %}

{# --- ページのメインコンテンツ --- #}
{% block content %}

  {# SVGアイコンの定義 (21. 事後アンケート.html と同じ) #}
  <svg class="icon-svg">
    <symbol id="icon-person" viewBox="0 0 24 24">
      <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
    </symbol>
  </svg>

  <div class="experiment-container">
    
    <div class="progress-tabs">
      <div class="tab-button active" id="tab-role2">あなたの進捗</div>
      <div class="tab-button" id="tab-role1">他メンバーの進捗</div>
    </div>

    <div class="progress-content">
      <div class="progress-steps active" id="steps-role2">
        <div class="step completed"><div class="step-number">1</div>同意取得</div>
        <div class="step completed"><div class="step-number">2</div>実験概要説明</div>
        <div class="step completed"><div class="step-number">3</div>タスク１説明</div>
        <div class="step completed"><div class="step-number">4</div>タスク２説明</div>
        <div class="step current"><div class="step-number">5</div>アンケート</div>
        <div class="step"><div class="step-number">6</div>報酬の確認</div>
      </div>
    </div>
    
    <div class="experiment-header">
      <div class="room-tabs">
        <div>作業ルーム1</div>
        <div>作業ルーム2</div>
        <div class="active">全体ルーム</div> 
      </div>
      <div class="header-right-panel">
        <button type="button" class="rule-check-button" id="open-rules-modal">
          ルールを確認する
        </button>
        <div class="user-profile">
          <div class="icon icon-user">
            <svg><use xlink:href="#icon-person"></use></svg>
          </div>
          <span class="name">あなた</span>
        </div>
      </div>
    </div>
    
    <div class="content-area">
      <h2 id="page-title">タスク３：事後アンケート（操作チェック）</h2>
      <p>
        まずはじめに、実験で提示された情報について、あなたの記憶がどれほど正確であったかを確認します。<br>
        半角数字でご回答ください。
      </p>

      <div class="question-block" id="q-mc-a">
        {# oTreeが models.py の 'mc_A_recall' の label と input を自動生成 #}
        {% formfield player.mc_A_recall %}
      </div>

      <div class="question-block" id="q-mc-b">
        {# oTreeが models.py の 'mc_B_recall' の label と input を自動生成 #}
        {% formfield player.mc_B_recall %}
      </div>
      
    </div> <div class="navigation-footer">
      {# {% formfield %} を使う場合、{% next_button %} が自動でバリデーションも行います #}
      {% next_button %}
    </div>

  </div> <div class="experiment-footer">
    <a id="quit-link">実験への参加を中断する</a>
  </div>

  <div class="modal-overlay" id="rules-modal">
    </div>

  <script src="{% static 'common.js' %}"></script>

{% endblock %}